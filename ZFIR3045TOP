*&---------------------------------------------------------------------*

*&---------------------------------------------------------------------*
TABLES : T001,
         BKPF,
         BSEG,
         PRPS,
         PROJ,
         FAGLFLEXT,
         FAGLFLEXA,
         ZFIT0051,
         ZFIT0052,
         AGR_USERS,
         ZFIT0056.

DATA :BEGIN OF GS_OUTTAB,
  RFAREA   LIKE BSEG-FKBER,
  GU       TYPE C,
  GUTXT(20),
  GUTOP    TYPE C,
  GUTOP_TXT(20),
  GUBUN    LIKE ZFIT0044-GUBUN,
  GUBUN_TXT(20),
  GUBUN2_TXT(20),
  HKONT    LIKE ZFIT0044-HKONT,
  HKONT2   LIKE ZFIT0044-HKONT,
  TXT20    LIKE SKAT-TXT20,
  GSBER    LIKE BSEG-GSBER,
  GTEXT    LIKE TGSBT-GTEXT,

  PRCTR    LIKE BSEG-PRCTR,
  KTEXT    LIKE CEPCT-KTEXT,
  PSPID    LIKE PROJ-PSPID,
  POST1    LIKE PROJ-POST1,
  DMBTR    LIKE BSEG-DMBTR,
  WAERS    LIKE BKPF-WAERS,
       END OF GS_OUTTAB,
      GT_OUTTAB LIKE GS_OUTTAB OCCURS 0.

DATA : GT_OUTBAK LIKE GS_OUTTAB OCCURS 0,
       GS_OUTBAK LIKE GS_OUTTAB.

DATA : BEGIN OF GS_DETAIL,
  RYEAR LIKE FAGLFLEXA-RYEAR,
  DOCNR LIKE FAGLFLEXA-DOCNR,
  RACCT LIKE FAGLFLEXA-RACCT,
  RATXT LIKE SKAT-TXT20,
  PRCTR LIKE FAGLFLEXA-PRCTR,
  PRTXT LIKE CEPCT-LTEXT,
  RFAREA   LIKE BSEG-FKBER,
  RBUSA LIKE FAGLFLEXA-RBUSA,
  SEGMENT LIKE PRPS-POSID,
  POST1 LIKE PRPS-POST1,
  HSL   LIKE FAGLFLEXA-HSL,
  TSL   LIKE FAGLFLEXA-TSL,
  RWCUR LIKE FAGLFLEXA-RWCUR,
  DRCRK LIKE FAGLFLEXA-DRCRK,
  BUDAT LIKE FAGLFLEXA-BUDAT,
  SGTXT LIKE BSEG-SGTXT,
  ZKUNNR LIKE BSEG-ZKUNNR,
  ZKUNNRT(20),
  ZLIFNR LIKE BSEG-ZLIFNR,
  ZLIFNRT(20),
       END OF GS_DETAIL,
       GT_DETAIL LIKE GS_DETAIL OCCURS 0.

DATA :BEGIN OF GS_PROJ,
  PSPID    LIKE PROJ-PSPID,
  POST1    LIKE PROJ-POST1,
       END OF GS_PROJ,
      GT_PROJ LIKE GS_PROJ OCCURS 0.

DATA : BEGIN OF GS_ZFIT0057,
       SHKZG LIKE ZFIT0057-SHKZG,
       HKONT TYPE BKK_R_HKONT,
  END OF GS_ZFIT0057,
  GT_ZFIT0057 LIKE GS_ZFIT0057 OCCURS 0.

DATA : GS_ZFIT0044 LIKE ZFIT0044,
       GT_ZFIT0044 LIKE ZFIT0044 OCCURS 0.

"연결- 데이터 전송( 시산표)
DATA : GS_ZFIT0056 LIKE ZFIT0056,
       GT_ZFIT0056 LIKE ZFIT0056 OCCURS 0.

DATA : G_WAERS TYPE WAERS.
DATA : G_EDATE TYPE SY-DATUM.

TYPES: BEGIN OF GTY_SEGMENT.

        INCLUDE STRUCTURE PROJ.
TYPES: END OF GTY_SEGMENT.

DATA : GT_SEGMENT TYPE STANDARD TABLE OF GTY_SEGMENT.

FIELD-SYMBOLS : <TSL>, <HSL>, <FS>.
DATA : GV_TSL(30), GV_HSL(30).
DATA : GV_FNAME(30).
DATA : GV_SPMON TYPE JAHRPER.

DATA : G_OUT_HKONT,
       G_OUT_GSBER,
       G_OUT_PRCTR,
       G_OUT_PSPID,
       G_OUT_FAREA.

FIELD-SYMBOLS : <TABLE>     TYPE TABLE,
                <LS_TABLE>  TYPE ANY,
                <HKONT>     TYPE ANY,
                <GU>        TYPE ANY,
                <GUTOP>     TYPE ANY,
                <GUBUN>     TYPE ANY,
                <GUBUN2_TXT> TYPE ANY.


DATA : GT_FCAT      TYPE LVC_T_FCAT,
       GS_FCAT      TYPE LVC_S_FCAT.

"-- WBS 값이 없는 것 표현
CONSTANTS C_ZZZZ(10) TYPE C VALUE 'ZZZZ'.

"-- 2014.12.04 BY fii02 그룹정보 선언
DATA: LT_INFO        LIKE  GRPHINFO   OCCURS 0 WITH HEADER LINE,
      LT_NODES       LIKE  GRPOBJECTS OCCURS 0 WITH HEADER LINE,
      LT_VALUES      LIKE  GRPVALUES  OCCURS 0 WITH HEADER LINE.

RANGES: R_PRCTR FOR FAGLFLEXT-PRCTR,
        R_POSID FOR PRPS-POSID,
        G_PSPID FOR PROJ-PSPID.
"-- 2014.12.04 BY fii02 그룹정보 선언

*&---------------------------------------------------------------------*
*& SELECTION-SCREEN
*&---------------------------------------------------------------------*
SELECTION-SCREEN FUNCTION KEY 1.
SELECTION-SCREEN FUNCTION KEY 2.
SELECTION-SCREEN BEGIN OF BLOCK B1 WITH FRAME TITLE TEXT-T01.
PARAMETERS : P_KOKRS TYPE KOKRS DEFAULT '1000' NO-DISPLAY,
             P_BUKRS LIKE T001-BUKRS OBLIGATORY MEMORY ID BUK,
             P_ORVER LIKE ZCOT0401-ORVER
                     MATCHCODE OBJECT ZHCO_ORVER NO-DISPLAY,
             P_SPMON TYPE SPMON      OBLIGATORY
                                     DEFAULT SY-DATUM+0(6).

SELECT-OPTIONS  : S_GSBER FOR FAGLFLEXT-RBUSA NO-DISPLAY,
                  S_RFAREA FOR BSEG-FKBER,
                  S_PRCTR FOR FAGLFLEXT-PRCTR.
"-- 2014.12.04 BY fii02 그룹정보 선언
PARAMETER       : P_PCGRP TYPE GRPNAME.
SELECT-OPTIONS  : S_PSPID FOR PROJ-PSPID.
"-- 2014.12.04 BY fii02 그룹정보 선언
PARAMETER       : P_WBSGRP TYPE GRPNAME.
SELECT-OPTIONS  : S_POSID FOR PRPS-POSID NO-DISPLAY,
                  S_HKONT FOR ZFIT0056-SAKNR NO-DISPLAY,
                  S_SAKNR FOR ZFIT0056-SAKNR .    "개별계정코드

SELECT-OPTIONS  : S_PRCTR2 FOR FAGLFLEXT-PRCTR NO-DISPLAY,
                  S_POSID2 FOR PRPS-POSID      NO-DISPLAY,
                  S_HKONT2 FOR ZFIT0056-SAKNR  NO-DISPLAY,
                  S_RBUSA2 FOR FAGLFLEXT-RBUSA NO-DISPLAY,
                  S_BUDAT2 FOR FAGLFLEXA-BUDAT NO-DISPLAY,
                  S_AWTYP2 FOR FAGLFLEXA-AWTYP NO-DISPLAY.

SELECTION-SCREEN SKIP 1.
PARAMETERS :      P_AWTYP  TYPE C AS CHECKBOX DEFAULT 'X'.
PARAMETERS :      P_ZERO   TYPE C AS CHECKBOX DEFAULT 'X'.

SELECTION-SCREEN END OF BLOCK B1.

SELECTION-SCREEN BEGIN OF SCREEN 0200 .
PARAMETERS : PC_HKONT TYPE C AS CHECKBOX DEFAULT 'X',
             PC_GSBER TYPE C AS CHECKBOX DEFAULT '',
             PC_FKBER TYPE C  DEFAULT 'X' NO-DISPLAY,
             PC_PRCTR TYPE C AS CHECKBOX DEFAULT '',
             PC_PSPID TYPE C AS CHECKBOX DEFAULT ''.
SELECTION-SCREEN END OF SCREEN 0200.

